<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN'
'http://ibatis.apache.org/dtd/sql-map-2.dtd'>

<sqlMap>

	<typeAlias alias="ordervo" type="order.OrderVO" />

	<resultMap id="orderRes" class="ordervo">
		<result property="no" column="no" />
		<result property="seq_no" column="seq_no" />
		<result property="name" column="name" />
		<result property="arv" column="arv" />
		<result property="dep" column="dep" />
		<result property="price" column="price" />
		<result property="country" column="country" />
		<result property="region" column="region" />
		<result property="image1" column="image1" />
		<result property="id" column="id" />
		<result property="day" column="day" />
		<result property="checkin" column="checkin" />
		<result property="checkout" column="checkout" />
		<result property="ad" column="ad" />
		<result property="dd" column="dd" />
		<result property="type" column="type" />

	</resultMap>
	
<sql id="select-allo">
	SELECT * FROM ORDERVO
</sql>

<sql id="where-Ido">
	WHERE ID = #id#
</sql>

<sql id="where-Noo">
	WHERE NO = #no#
</sql>

<select id="selectOneo" resultMap="orderRes" parameterClass="String">
   <include refid="select-allo"/>
   <include refid="where-Ido"/>
</select>


	<!-- 구매한 상품을 구매내역 테이블에 저장 -->
	<insert id="putorder" parameterClass="ordervo">
		INSERT INTO ordervo
		(no, seq_no, name, price, country, region, id,
		 image1, day, checkin, checkout, arv, dep,
		ad, dd, type)
		VALUES (seq_ordervo.NEXTVAL, #seq_no#, #name#, #price#, #country#,
		#region#, #id#, #image1#, 
		#day#, #checkin#, #checkout#, #arv#, #dep#, #ad#, #dd#, #type#)
	</insert>


	<!-- 세션 id값에 해당하는 구매내역 테이블의 정보를 가져온다. -->
	<select id="selectorder" resultMap="orderRes" parameterClass="ordervo">
		SELECT * FROM ordervo WHERE id = #id#
	</select>
	
	
		<!-- 구매내역  삭제 -->
	<delete id="deleteorder" parameterClass="ordervo">
		DELETE FROM ordervo WHERE no = #no# and id = #id#
	</delete>
	
	<!-- 구매내역 날짜 수정 -->
	<update id="ModifyOrder" parameterClass="ordervo">
	  UPDATE ordervo SET day=#day#, checkin=#checkin#, checkout=#checkout#, ad=#ad#, dd=#dd#
	  <include refid="where-Ido" />
	</update>
	
	

</sqlMap>